---
import Layout from "../layouts/Layout.astro";
import { getCollection, render } from "astro:content";
import BlogPost from "../layouts/BlogPost.astro";

const allPosts = (await getCollection("blog")).sort(
  (a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
);
const base = import.meta.env.BASE_URL;
---
<Layout title="Short Thoughts">
  <div class="flex flex-col items-center max-w-prose mx-auto px-4 mt-8">
    <ul class="w-full">
      {allPosts.map(async (post) => {
        const { Content } = await render(post);
        return (
        <li class="border-b border-gray-200 py-4">
          <a href={`${base}blog/${post.slug}/`} class="block text-xl font-semibold hover:text-gray-900">
            {post.data.title}
          </a>
          <div class="prose prose-lg max-w-none">
              <Content />
          </div>
        </li>
        );
      })}
    </ul>
    
  </div>
</Layout>
